<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Report</title>
        <link rel="stylesheet" href="css/style.css">
        <script src= "https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>

    </head>
    <body>
      <div class ="chart-box" >
        <canvas id="myChart" height="75%" width="75%"></canvas>
      </div>

      <script>

        fetch('/manual-report').then(function(response){
            return response.json();
            }).then(function (data) {
                console.log('MY ARRAY', data);
                custoIn = data.custoIn;
                residIn = data.residIn;
                emploIn = data.emploIn;
                timings = data.timings;
                ChartInitialise(custoIn, residIn, emploIn, timings)
            })

        function ChartInitialise (custoIn, residIn, emploIn, timings){

            let myChart = document.getElementById('myChart').getContext('2d');
            myChart.canvas.parentNode.style.height = '512px';
            myChart.canvas.parentNode.style.width = '512px';


            let newChart = new Chart(myChart, {
                type: 'bar',
                data: {
                    labels: timings,
                    datasets: [{
                        label: 'Customer',
                        data: custoIn,
                        backgroundColor: '#3a96f2',
                        hoverBorderWidth: 6,
                        hoverBorderColor: '#969696'
                    },
                    {
                        label: 'Resident',
                        data: residIn,
                        backgroundColor: '#21C085',
                        hoverBorderWidth: 6,
                        hoverBorderColor: '#969696'
                    },
                    {
                        label: 'Employee',
                        data: emploIn,
                        backgroundColor: '#2166C0',
                        hoverBorderWidth: 6,
                        hoverBorderColor: '#969696'
                    }]
                },
                options: {
                    title: {
                        display: true,
                        text: 'Automatic report',
                        fontSize: 20
                    },
                    scales: {
                        yAxes: [{
                            ticks: {
                                beginAtZero: true
                            },

                            display: true,
                        }]
                    }


                }
            });
        }

      </script>

    </body>
</html>